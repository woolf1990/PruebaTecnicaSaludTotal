/*Toda la estrucutra fue puesta en el esquema pruebatecnica */
CREATE TABLE pruebatecnica.arl (
  idarl SERIAL,
  valor NUMERIC(6,0),
  usuariocreacion VARCHAR(20),
  fechacreacion TIMESTAMP WITHOUT TIME ZONE DEFAULT now(),
  habilitado BOOLEAN DEFAULT true,
  CONSTRAINT arl_pkey PRIMARY KEY(idarl)
) 
WITH (oids = false);

INSERT INTO pruebatecnica.arl ("idarl", "valor", "usuariocreacion", "fechacreacion", "habilitado")
VALUES (1, 0, E'sistema', now(), True);

INSERT INTO pruebatecnica.arl ("idarl", "valor", "usuariocreacion", "fechacreacion", "habilitado")
VALUES (2, 1, E'sistema', now(), True);

INSERT INTO pruebatecnica.arl ("idarl", "valor", "usuariocreacion", "fechacreacion", "habilitado")
VALUES (3, 2, E'sistema', now(), True);

CREATE TABLE pruebatecnica.cargos (
  idcargo SERIAL,
  nombre VARCHAR(50),
  usuariocreacion VARCHAR(20),
  fechacreacion TIMESTAMP WITHOUT TIME ZONE DEFAULT now(),
  CONSTRAINT cargos_pkey PRIMARY KEY(idcargo)
) 
WITH (oids = false);

INSERT INTO pruebatecnica.cargos ("idcargo", "nombre", "usuariocreacion", "fechacreacion")
VALUES (1, E'OPERATIVO', E'sistema', now());

INSERT INTO pruebatecnica.cargos ("idcargo", "nombre", "usuariocreacion", "fechacreacion")
VALUES (2, E'ADMINISTRATIVO', E'sistema', now());

INSERT INTO pruebatecnica.cargos ("idcargo", "nombre", "usuariocreacion", "fechacreacion")
VALUES (3, E'ASEO', E'sistema',now());

INSERT INTO pruebatecnica.cargos ("idcargo", "nombre", "usuariocreacion", "fechacreacion")
VALUES (4, E'GERENTE', E'sistema', now());

INSERT INTO pruebatecnica.cargos ("idcargo", "nombre", "usuariocreacion", "fechacreacion")
VALUES (5, E'SECRETARIA', E'sistema', now());

INSERT INTO pruebatecnica.cargos ("idcargo", "nombre", "usuariocreacion", "fechacreacion")
VALUES (6, E'CAJERO', E'sistema', now());

CREATE TABLE pruebatecnica.estados (
  idestado SERIAL,
  nombre VARCHAR(50),
  usuariocreacion VARCHAR(20),
  fechacreacion TIMESTAMP(0) WITHOUT TIME ZONE DEFAULT now(),
  CONSTRAINT estados_pkey PRIMARY KEY(idestado)
) 
WITH (oids = false);

CREATE TABLE pruebatecnica.tipodocumento (
  idtipodocumento SERIAL,
  nombre VARCHAR(50),
  usuariocreacion VARCHAR(20),
  fechacreacion TIMESTAMP WITHOUT TIME ZONE DEFAULT now(),
  CONSTRAINT tipodocumento_pkey PRIMARY KEY(idtipodocumento)
) 
WITH (oids = false);

CREATE TABLE pruebatecnica.contratoslaborales (
  idcontrato SERIAL,
  idestado INTEGER,
  idarl INTEGER,
  idcargo INTEGER,
  idtipodocumento INTEGER,
  numerodocumento NUMERIC(16,0),
  primerapellido VARCHAR(20),
  segundoapellido VARCHAR(20),
  primernombre VARCHAR(20),
  segundonombre VARCHAR(20),
  fechainicio DATE,
  fechafin DATE,
  salario NUMERIC(12,0),
  usuariocreacion VARCHAR(20),
  fechacreacion TIMESTAMP WITHOUT TIME ZONE DEFAULT now(),
  CONSTRAINT contratoslaborales_pkey PRIMARY KEY(idcontrato),
  CONSTRAINT contratoslaborales_fk FOREIGN KEY (idestado)
    REFERENCES pruebatecnica.estados(idestado)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE,
  CONSTRAINT contratoslaborales_fk1 FOREIGN KEY (idarl)
    REFERENCES pruebatecnica.arl(idarl)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE,
  CONSTRAINT contratoslaborales_fk2 FOREIGN KEY (idcargo)
    REFERENCES pruebatecnica.cargos(idcargo)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE,
  CONSTRAINT contratoslaborales_fk3 FOREIGN KEY (idtipodocumento)
    REFERENCES pruebatecnica.tipodocumento(idtipodocumento)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE
) 
WITH (oids = false);



CREATE TABLE pruebatecnica.novedadesnomina (
  idnovedadnomina SERIAL,
  idcontrato INTEGER,
  periodolaborado VARCHAR(20),
  horaslaboradas NUMERIC(4,0),
  horaextradiurna NUMERIC(12,0),
  horaextranocturna NUMERIC(12,0),
  horaextradominical NUMERIC(12,0),
  horaextrafestiva NUMERIC(12,0),
  descuentos NUMERIC(12,0),
  usuariocreacion VARCHAR(20),
  fechacreacion TIMESTAMP WITHOUT TIME ZONE,
  CONSTRAINT novedadesnomina_pkey PRIMARY KEY(idnovedadnomina),
  CONSTRAINT novedadesnomina_fk FOREIGN KEY (idcontrato)
    REFERENCES pruebatecnica.contratoslaborales(idcontrato)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE
) 
WITH (oids = false);


/*Agregado por edgar*/
INSERT INTO pruebatecnica.estados (nombre, usuariocreacion, fechacreacion) VALUES('Estado 1', 'Edgar Nieto', now());
INSERT INTO pruebatecnica.estados (nombre, usuariocreacion, fechacreacion) VALUES('Estado 2', 'Edgar Nieto', now());

INSERT INTO pruebatecnica.cargos (nombre, usuariocreacion, fechacreacion) VALUES('Desarrollador JR', 'Edgar Nieto', now());
INSERT INTO pruebatecnica.cargos (nombre, usuariocreacion, fechacreacion) VALUES('Desarrollador Master', 'Edgar Nieto', now());
INSERT INTO pruebatecnica.cargos (nombre, usuariocreacion, fechacreacion) VALUES('Desarrollador Senior', 'Edgar Nieto', now());


INSERT INTO pruebatecnica.tipodocumento ("idtipodocumento", "nombre", "usuariocreacion", "fechacreacion")
VALUES (1, E'CC', E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (0, 1, 1, 3, 1, '1143849550', E'CRUZ', E'GOMEZ', E'ESTEFANIA', E'', E'2020-12-15', NULL, 1000000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (1, 2, 3, 1, 1, '1085305182', E'ACEVEDO', E'ACOSTA', E'VIRGINIA', E'MARIA', E'2020-11-12', E'2021-01-20', 1014980, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (2, 1, 3, 2, 1, '1085252501', E'BERMEO', E'ZUÑIGA', E'JHON', E'FREDY', E'2020-12-14', NULL, 3422640, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (4, 1, 3, 4, 1, '1144158231', E'LONDOÑO', E'ARBELAEZ', E'JUAN', E'MANUEL', E'2020-12-28', NULL, 1014980, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (5, 1, 1, 5, 1, '94525246', E'LOPEZ', E'RAMIREZ', E'ANGELA', E'MARIA', E'2020-11-12', NULL, 1948910, E'sistema',now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (6, 1, 1, 6, 1, '27265889', E'PERDOMO', E'', E'LIBIA', E'EMILSE', E'2020-11-12', NULL, 1597990, E'sistema', now());
----

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (8, 1, 3, 8, 1, '30768924', E'ROMERO', E'ARCILA', E'LEYDI', E'SEBASTIAN', E'2020-11-23', NULL, 1014980, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (9, 1, 3, 9, 1, '1015462501', E'BAUTISTA', E'VALENCIA', E'NANCY', E'ERNESTINA', E'2020-12-09', NULL, 1000000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (10, 1, 1, 6, 1, '34566439', E'GIRALDO', E'RIOS', E'LILIANA', E'', E'2020-11-12', NULL, 1850000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (11, 2, 1, 1, 1, '25263589', E'ORTIZ', E'ANGEL', E'HENRY', E'DE JESUS', E'2020-12-14', E'2021-01-15', 1451480, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (12, 1, 1, 2, 1, '31162516', E'ZUÑIGA', E'CELEMIN', E'LISSETH', E'YAHAIRA', NULL, NULL, 2051480, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (13, 1, 1, 3, 1, '16452365', E'CASTILLO', E'CASANOVA', E'SINDY', E'CAMILA', E'2020-12-28', NULL, 1450000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (14, 2, 1, 4, 1, '59632234', E'MENDOZA', E'LOZANO', E'CLAUDIA', E'MILENA', E'2020-11-12', E'2021-12-30', 1200000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (15, 1, 1, 5, 1, '31378091', E'ARCOS', E'MUÑOZ', E'DIANA', E'MERCEDES', E'2020-11-12', NULL, 4500000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (16, 2, 3, 6, 1, '30792016', E'GALVEZ', E'GOMEZ', E'CAROLINA', E'DIANA', E'2020-11-17', E'2021-01-05', 1850000, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (17, 1, 1, 7, 1, '113423359', E'GARCES', E'BOLAÑOS', E'MARGARET', E'ANDREA', E'2020-11-23', NULL, 1997450, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (18, 1, 3, 8, 1, '38699024', E'GONZALEZ', E'CARREJO', E'MADELEINE', E'', E'2020-12-09', NULL, 1014980, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (19, 1, 3, 9, 1, '1126874820', E'MURIEL', E'TORRES', E'CHRISTIAN', E'ANDRES', E'2020-12-28', NULL, 1014980, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (20, 1, 3, 2, 1, '1061688998', E'ZARATE', E'VILLAMIL', E'PAOLA', E'ANDREA', E'2020-11-12', NULL, 1014980, E'sistema', now());

INSERT INTO pruebatecnica.contratoslaborales ("idcontrato", "idestado", "idarl", "idcargo", "idtipodocumento", "numerodocumento", "primerapellido", "segundoapellido", "primernombre", "segundonombre", "fechainicio", "fechafin", "salario", "usuariocreacion", "fechacreacion")
VALUES (7, 2, 1, 7, 1, '34328269', E'RODRIGUEZ', E'ROSERO', E'JOAN', E'NATHALI', E'2020-11-17', E'2021-01-10', 2051480, E'sistema', now());


/*Agregado para la prueba */
ALTER TABLE pruebatecnica.arl ADD nombre varchar(50) NULL;
update pruebatecnica.arl set nombre = 'ARL 1' where idarl =1
update pruebatecnica.arl set nombre = 'ARL 2' where idarl =2
update pruebatecnica.arl set nombre = 'ARL 3' where idarl =3